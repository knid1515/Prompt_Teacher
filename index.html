
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt for Teacher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
    </style>
    <script data-ad-client="ca-pub-9727966347594723" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-indigo-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center space-x-3">
                    <div class="text-4xl">üéì</div>
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">Prompt for Teacher</h1>
                        <p class="text-gray-600">‡πÅ‡∏ä‡∏£‡πå prompt ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π‡∏ô‡∏≥‡πÑ‡∏õ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏∞‡∏î‡∏ß‡∏Å</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="loginBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2">
                        <span>üîê</span>
                        <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Admin</span>
                    </button>
                    <div id="userInfo" class="hidden flex items-center space-x-3">
                        <img id="userPhoto" class="w-10 h-10 rounded-full" alt="User">
                        <span id="userName" class="text-gray-700 font-medium"></span>
                        <button id="logoutBtn" class="text-red-600 hover:text-red-700 font-medium">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Search Bar -->
        <div class="mb-8">
            <div class="relative max-w-2xl mx-auto">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <span class="text-gray-400 text-xl">üîç</span>
                </div>
                <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ prompt ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£..." 
                       class="block w-full pl-12 pr-4 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent shadow-lg">
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="hidden mb-8 bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900 flex items-center space-x-2">
                    <span>‚öôÔ∏è</span>
                    <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Prompt</span>
                </h2>
                <button id="addPromptBtn" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2">
                    <span>‚ûï</span>
                    <span>‡πÄ‡∏û‡∏¥‡πà‡∏° Prompt ‡πÉ‡∏´‡∏°‡πà</span>
                </button>
            </div>

            <div id="adminTableContainer" class="hidden">
                </div>
        </div>

        <!-- Categories Filter -->
        <div class="mb-8">
            <div class="flex flex-wrap gap-3" id="categoryFilter">
                <button class="category-btn active bg-indigo-600 text-white px-4 py-2 rounded-full font-medium transition-colors" data-category="all">
                    üìö ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
            </div>
        </div>

        <!-- Prompts Grid -->
        <div id="promptsGrid" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- Prompts will be loaded here -->
        </div>

        <div id="paginationContainer" class="flex justify-center items-center mt-12 space-x-4">
            </div>

        <!-- Loading -->
        <div id="loading" class="text-center py-12">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
            <p class="mt-4 text-gray-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>

        <!-- No Results -->
        <div id="noResults" class="hidden text-center py-12">
            <div class="text-6xl mb-4">üòî</div>
            <p class="text-xl text-gray-600">‡πÑ‡∏°‡πà‡∏û‡∏ö prompt ‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
        </div>
    </main>

    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-gray-600">
                Copyright &copy; 2025 by 
                <a 
                    href="http://www.nattapon.com" 
                    target="_blank" 
                    rel="noopener noreferrer" 
                    class="font-semibold text-indigo-600 hover:underline"
                >
                    ‡∏Ñ‡∏£‡∏π‡∏ì‡∏±‡∏ê‡∏û‡∏• ‡∏ö‡∏±‡∏ß‡∏≠‡∏∏‡πÑ‡∏£
                </a>
            </p>
        </div>
    </footer>

    <!-- Add/Edit Prompt Modal -->
    <div id="promptModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900" id="modalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏° Prompt ‡πÉ‡∏´‡∏°‡πà</h3>
                    <button id="closeModal" class="text-gray-400 hover:text-gray-600 text-2xl">‚úï</button>
                </div>
                
                <form id="promptForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠ Prompt</label>
                        <input type="text" id="promptName" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                        <div class="flex space-x-2">
                            <select id="categorySelect" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                            </select>
                            <button type="button" id="addCategoryBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg font-medium transition-colors">
                                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                            </button>
                        </div>
                        <input type="text" id="newCategory" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà" 
                               class="hidden w-full mt-2 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Prompt</label>
                        <textarea id="promptContent" required rows="8" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                                  placeholder="‡∏Å‡∏£‡∏≠‡∏Å prompt ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå..."></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</label>
                        <input type="file" id="imageUpload" accept="image/*" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <div id="imagePreview" class="hidden mt-4">
                            <img class="w-full h-48 object-cover rounded-lg" alt="Preview">
                        </div>
                    </div>
                    
                    <div class="flex space-x-4 pt-4">
                        <button type="submit" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium transition-colors">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                        </button>
                        <button type="button" id="cancelBtn" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-lg font-medium transition-colors">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Prompt Detail Modal -->
    <div id="detailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden">
            
            <div class="p-6 flex-grow overflow-y-auto">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <h3 class="text-3xl font-bold text-gray-900" id="detailTitle"></h3>
                        <span class="inline-block bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium mt-2" id="detailCategory"></span>
                    </div>
                    <button id="closeDetailModal" class="text-gray-400 hover:text-gray-600 text-2xl">‚úï</button>
                </div>
                
                <div class="space-y-4 mt-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Prompt</label>
                        <div class="relative">
                            <textarea id="detailPrompt" readonly 
                                    class="w-full p-4 border border-gray-300 rounded-lg bg-gray-50 resize-none" 
                                    rows="10"></textarea>
                            <button id="copyBtn" class="absolute top-3 right-3 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm transition-colors flex items-center space-x-2">
                                <span>üìã</span>
                                <span>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="detailImageContainer" class="hidden p-6 border-t border-gray-200 bg-gray-50">
                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</label>
                <img id="detailImage" class="w-full h-auto rounded-lg object-contain max-h-96" alt="Example">
            </div>
        </div>
    </div>

    <div id="fullImageModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-[60]">
        <div class="relative">
            <img id="fullImage" class="max-w-full max-h-[90vh] object-contain" alt="Full Image">
            <button id="closeFullImageModal" class="absolute -top-4 -right-4 bg-gray-800 text-white rounded-full p-2 hover:bg-gray-700">
                ‚úï
            </button>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDXdE51ZXKrh_tlAcaEZ3j6sBkOS8NA4Rs",
            authDomain: "python-ct-site.firebaseapp.com",
            projectId: "python-ct-site",
            storageBucket: "python-ct-site.firebasestorage.app",
            messagingSenderId: "806865489315",
            appId: "1:806865489315:web:7c5d1e661bdc32c67ede16",
            measurementId: "G-7VW38N7DJW"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();

        // Global variables
        let prompts = [];
        let categories = [];
        let currentUser = null;
        let editingPromptId = null;

        let displayedPrompts = []; // Array ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏à‡∏£‡∏¥‡∏á (‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å filter ‡∏´‡∏£‡∏∑‡∏≠ search)
        let currentPage = 1;
        const itemsPerPage = 20; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á 20 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤

        // DOM elements
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userInfo = document.getElementById('userInfo');
        const adminPanel = document.getElementById('adminPanel');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const promptsGrid = document.getElementById('promptsGrid');
        const loading = document.getElementById('loading');
        const noResults = document.getElementById('noResults');
        const promptModal = document.getElementById('promptModal');
        const detailModal = document.getElementById('detailModal');

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadPrompts();
            setupEventListeners();
            
            // Auth state observer
            // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ ***
            auth.onAuthStateChanged(user => {
                const adminTableContainer = document.getElementById('adminTableContainer');

                if (user && user.email === 'krunattapon@skr.ac.th') {
                    currentUser = user;
                    showUserInfo(user);
                    showAdminPanel();
                    
                    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô Admin: ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    promptsGrid.classList.add('hidden');
                    categoryFilter.classList.add('hidden'); // ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢
                    adminTableContainer.classList.remove('hidden');
                    renderAdminTable(prompts); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á

                } else {
                    currentUser = null;
                    hideUserInfo();
                    hideAdminPanel();

                    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô User ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ: ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    promptsGrid.classList.remove('hidden');
                    categoryFilter.classList.remove('hidden');
                    adminTableContainer.classList.add('hidden');
                    renderPrompts(prompts); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î
                }
            });
        });

        // Setup event listeners
        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ ***
        function setupEventListeners() {
            loginBtn.addEventListener('click', signInWithGoogle);
            logoutBtn.addEventListener('click', signOut);
            searchInput.addEventListener('input', handleSearch);
            
            // Modal events
            document.getElementById('addPromptBtn').addEventListener('click', () => openPromptModal());
            document.getElementById('closeModal').addEventListener('click', closePromptModal);
            document.getElementById('closeDetailModal').addEventListener('click', closeDetailModal);
            document.getElementById('cancelBtn').addEventListener('click', closePromptModal);
            document.getElementById('promptForm').addEventListener('submit', handlePromptSubmit);
            document.getElementById('copyBtn').addEventListener('click', copyPrompt);
            
            // Category management
            document.getElementById('addCategoryBtn').addEventListener('click', toggleNewCategoryInput);
            
            // Image upload preview
            document.getElementById('imageUpload').addEventListener('change', handleImagePreview);

            // ‚úÖ --- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏¥‡∏î Full Image Modal ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà --- ‚úÖ
            const closeFullImageBtn = document.getElementById('closeFullImageModal');
            if (closeFullImageBtn) {
                closeFullImageBtn.addEventListener('click', () => {
                    document.getElementById('fullImageModal').classList.add('hidden');
                });
            }
        }

        // Authentication functions
        async function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            try {
                await auth.signInWithPopup(provider);
            } catch (error) {
                alert('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message);
            }
        }

        async function signOut() {
            try {
                await auth.signOut();
            } catch (error) {
                alert('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message);
            }
        }

        function showUserInfo(user) {
            document.getElementById('userPhoto').src = user.photoURL;
            document.getElementById('userName').textContent = user.displayName;
            loginBtn.classList.add('hidden');
            userInfo.classList.remove('hidden');
        }

        function hideUserInfo() {
            loginBtn.classList.remove('hidden');
            userInfo.classList.add('hidden');
        }

        function showAdminPanel() {
            adminPanel.classList.remove('hidden');
        }

        function hideAdminPanel() {
            adminPanel.classList.add('hidden');
        }

        // Load prompts from Firestore
        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ ***
        async function loadPrompts() {
            try {
                loading.classList.remove('hidden');
                const snapshot = await db.collection('prompt-teacher').orderBy('createdAt', 'desc').get();
                prompts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                
                // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
                displayedPrompts = [...prompts];
                
                categories = [...new Set(prompts.map(p => p.category))].filter(Boolean);
                renderCategoryFilter();
                
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ 1
                displayPage(1);

                loading.classList.add('hidden');
            } catch (error) {
                console.error('Error loading prompts:', error);
                loading.classList.add('hidden');
            }
        }

        // Render category filter
        function renderCategoryFilter() {
            const allBtn = categoryFilter.querySelector('[data-category="all"]');
            categoryFilter.innerHTML = '';
            categoryFilter.appendChild(allBtn);
            
            categories.forEach(category => {
                const btn = document.createElement('button');
                btn.className = 'category-btn bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-full font-medium transition-colors';
                btn.setAttribute('data-category', category);
                btn.innerHTML = `üìÅ ${category}`;
                btn.addEventListener('click', () => filterByCategory(category));
                categoryFilter.appendChild(btn);
            });
            
            allBtn.addEventListener('click', () => filterByCategory('all'));
        }

        // Filter prompts by category
        function filterByCategory(category) {
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-indigo-600', 'text-white');
                btn.classList.add('bg-gray-200', 'hover:bg-gray-300', 'text-gray-700');
            });
            
            const activeBtn = document.querySelector(`[data-category="${category}"]`);
            activeBtn.classList.add('active', 'bg-indigo-600', 'text-white');
            activeBtn.classList.remove('bg-gray-200', 'hover:bg-gray-300', 'text-gray-700');

            // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å `prompts` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            displayedPrompts = category === 'all' ? [...prompts] : prompts.filter(p => p.category === category);
            
            // ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ 1
            displayPage(1);
        }

        // Search functionality
        function handleSearch() {
            const query = searchInput.value.toLowerCase().trim();
            displayedPrompts = prompts.filter(prompt => 
                prompt.name.toLowerCase().includes(query) ||
                prompt.content.toLowerCase().includes(query) ||
                (prompt.category && prompt.category.toLowerCase().includes(query))
            );

            // ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ 1
            displayPage(1);
        }

        // Render prompts grid
        function renderPrompts(promptsToRender) {
            promptsGrid.innerHTML = promptsToRender.map(prompt => {
                const ratingSum = prompt.ratingSum || 0;
                const ratingCount = prompt.ratingCount || 0;
                const averageRating = ratingCount > 0 ? ratingSum / ratingCount : 0;
                const fullStars = Math.round(averageRating);
                const starsHTML = '‚òÖ'.repeat(fullStars) + '‚òÜ'.repeat(5 - fullStars);
                const safeName = prompt.name.replace(/'/g, "\\'").replace(/"/g, "&quot;");

                return `
                <div class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition-shadow duration-300 overflow-hidden flex flex-col cursor-pointer" onclick="openDetailModal('${prompt.id}')">
                    
                    ${prompt.imageUrl ? `
                        <img src="${prompt.imageUrl}" alt="${prompt.name}" class="w-full h-48 object-cover">
                    ` : `
                        <div class="w-full h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center">
                            <span class="text-5xl text-gray-500">üéì</span>
                        </div>
                    `}

                    <div class="p-5 flex flex-col flex-grow">
                        <h3 class="text-lg font-bold text-gray-800 line-clamp-2 mb-2">${prompt.name}</h3>
                        <span class="inline-block bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-xs font-semibold mb-3 self-start">
                            ${prompt.category}
                        </span>
                        <p class="text-sm text-gray-600 line-clamp-3 flex-grow">${prompt.content}</p>
                        
                    </div>
                </div>
                `;
            }).join('');
        }

        // Modal functions
        function openPromptModal(promptId = null) {
            editingPromptId = promptId;
            const modal = document.getElementById('promptModal');
            const title = document.getElementById('modalTitle');
            const form = document.getElementById('promptForm');
            
            if (promptId) {
                const prompt = prompts.find(p => p.id === promptId);
                title.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Prompt';
                document.getElementById('promptName').value = prompt.name;
                document.getElementById('promptContent').value = prompt.content;
                
                // Load categories and set selected
                loadCategoriesIntoSelect(prompt.category);
                
                if (prompt.imageUrl) {
                    const preview = document.getElementById('imagePreview');
                    preview.querySelector('img').src = prompt.imageUrl;
                    preview.classList.remove('hidden');
                }
            } else {
                title.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏° Prompt ‡πÉ‡∏´‡∏°‡πà';
                form.reset();
                document.getElementById('imagePreview').classList.add('hidden');
                loadCategoriesIntoSelect();
            }
            
            modal.classList.remove('hidden');
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.add('hidden');
            document.getElementById('promptForm').reset();
            document.getElementById('imagePreview').classList.add('hidden');
            document.getElementById('newCategory').classList.add('hidden');
            editingPromptId = null;
        }

        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ ***
        function openDetailModal(promptId) {
            const prompt = prompts.find(p => p.id === promptId);
            if (!prompt) return;

            // ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ñ‡∏∂‡∏á Element
            const imageContainer = document.getElementById('detailImageContainer');
            const detailImage = document.getElementById('detailImage');
            
            // ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
            document.getElementById('detailTitle').textContent = prompt.name;
            document.getElementById('detailCategory').textContent = prompt.category;
            document.getElementById('detailPrompt').value = prompt.content;
            
            // Logic ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
            if (prompt.imageUrl) {
                detailImage.src = prompt.imageUrl;
                imageContainer.classList.remove('hidden');
            } else {
                imageContainer.classList.add('hidden');
            }
            
            document.getElementById('detailModal').classList.remove('hidden');
        }

        // *** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ***
        function openFullImageModal(imageUrl, imageName) {
            event.stopPropagation(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ detailModal ‡πÄ‡∏õ‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
            const fullImage = document.getElementById('fullImage');
            fullImage.src = imageUrl;
            fullImage.alt = imageName;
            document.getElementById('fullImageModal').classList.remove('hidden');
        }

        function closeDetailModal() {
            document.getElementById('detailModal').classList.add('hidden');
        }

        // Load categories into select dropdown
        function loadCategoriesIntoSelect(selectedCategory = '') {
            const select = document.getElementById('categorySelect');
            select.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>';
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                if (category === selectedCategory) {
                    option.selected = true;
                }
                select.appendChild(option);
            });
        }

        // Toggle new category input
        function toggleNewCategoryInput() {
            const input = document.getElementById('newCategory');
            const select = document.getElementById('categorySelect');
            
            if (input.classList.contains('hidden')) {
                input.classList.remove('hidden');
                input.focus();
                select.value = '';
            } else {
                input.classList.add('hidden');
                input.value = '';
            }
        }

        // Handle image preview
        function handleImagePreview(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('imagePreview');
                    preview.querySelector('img').src = e.target.result;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        // Handle prompt form submission
        // *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ ***
        async function handlePromptSubmit(event) {
            event.preventDefault();
            
            if (!currentUser) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }
            
            const name = document.getElementById('promptName').value.trim();
            const content = document.getElementById('promptContent').value.trim();
            const categorySelect = document.getElementById('categorySelect').value;
            const newCategory = document.getElementById('newCategory').value.trim();
            const imageFile = document.getElementById('imageUpload').files[0];
            
            const category = newCategory || categorySelect;
            
            if (!name || !content || !category) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }

            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ñ‡∏π‡∏Å‡∏ô‡∏≥‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ---
                    
            try {
                let imageUrl = '';

                // ‡∏î‡∏∂‡∏á URL ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÉ‡∏ä‡πâ ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ
                if (editingPromptId && !imageFile) {
                    const existingPrompt = prompts.find(p => p.id === editingPromptId);
                    imageUrl = existingPrompt.imageUrl || '';
                }
                
                // ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                if (imageFile) {
                    const imageRef = storage.ref(`prompt-images/${Date.now()}_${imageFile.name}`);
                    const snapshot = await imageRef.put(imageFile);
                    imageUrl = await snapshot.ref.getDownloadURL();
                }
                
                const promptData = {
                    name,
                    content,
                    category,
                    imageUrl, // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ ‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á ""
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                if (editingPromptId) {
                    // Update existing prompt
                    const oldPrompt = prompts.find(p => p.id === editingPromptId);
                    if(imageFile && oldPrompt.imageUrl) {
                        storage.refFromURL(oldPrompt.imageUrl).delete().catch(err => console.error("Failed to delete old image:", err));
                    }
                    await db.collection('prompt-teacher').doc(editingPromptId).update(promptData);
                } else {
                    // Create new prompt
                    promptData.createdAt = firebase.firestore.FieldValue.serverTimestamp();
                    await db.collection('prompt-teacher').add(promptData);
                }
                
                closePromptModal();
                loadPrompts();
                alert(editingPromptId ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Prompt ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡πÄ‡∏û‡∏¥‡πà‡∏° Prompt ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                
            } catch (error) {
                console.error('Error saving prompt:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
            }
        }

        // Edit prompt function
        function editPrompt(promptId) {
            openPromptModal(promptId);
        }

        // Copy prompt to clipboard
        async function copyPrompt() {
            const promptText = document.getElementById('detailPrompt').value;
            try {
                await navigator.clipboard.writeText(promptText);
                const btn = document.getElementById('copyBtn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            } catch (error) {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ');
            }
        }

        // *** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ***
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö Prompt (‡∏ó‡∏±‡πâ‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û)
        async function deletePrompt(promptId, imageUrl) {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö Prompt ‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ')) {
                return;
            }
            
            try {
                // 1. ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firestore
                await db.collection('prompt-teacher').doc(promptId).delete();
                
                // 2. ‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Storage (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                if (imageUrl) {
                    const imageRef = storage.refFromURL(imageUrl);
                    await imageRef.delete();
                }
                
                alert('‡∏•‡∏ö Prompt ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                loadPrompts(); // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
                
            } catch (error) {
                console.error('Error deleting prompt:', error);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö: ' + error.message);
            }
        }

        // *** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ***
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Admin
        function renderAdminTable(promptsToRender) {
            const container = document.getElementById('adminTableContainer');
            if (promptsToRender.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Prompt ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>';
                container.classList.remove('hidden');
                return;
            }

            const tableHTML = `
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠ Prompt</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            ${promptsToRender.map(prompt => `
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm font-medium text-gray-900">${prompt.name}</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800">
                                            ${prompt.category}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button onclick="editPrompt('${prompt.id}')" class="text-indigo-600 hover:text-indigo-900 mr-4">View/Edit</button>
                                        <button onclick="deletePrompt('${prompt.id}', '${prompt.imageUrl || ''}')" class="text-red-600 hover:text-red-900">Del</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            container.innerHTML = tableHTML;
            container.classList.remove('hidden');
        }

        // *** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ***
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤
        function displayPage(page) {
            // ‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° '‡πÑ‡∏°‡πà‡∏û‡∏ö prompt'
            const noResultsEl = document.getElementById('noResults');
            const promptsGridEl = document.getElementById('promptsGrid');
            const paginationContainerEl = document.getElementById('paginationContainer');

            if (displayedPrompts.length === 0) {
                promptsGridEl.classList.add('hidden');
                paginationContainerEl.classList.add('hidden');
                noResultsEl.classList.remove('hidden');
                return;
            } else {
                promptsGridEl.classList.remove('hidden');
                paginationContainerEl.classList.remove('hidden');
                noResultsEl.classList.add('hidden');
            }

            currentPage = page;
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            
            // ‡∏ï‡∏±‡∏î array ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÜ
            const paginatedItems = displayedPrompts.slice(startIndex, endIndex);

            // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ render ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°
            renderPrompts(paginatedItems);
            renderPaginationControls();

            // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î
            promptsGridEl.scrollIntoView({ behavior: 'smooth' });
        }

        // *** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà ***
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° Previous/Next
        function renderPaginationControls() {
            const container = document.getElementById('paginationContainer');
            const totalPages = Math.ceil(displayedPrompts.length / itemsPerPage);
            container.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á

            if (totalPages <= 1) return; // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°

            const prevDisabled = currentPage === 1;
            const nextDisabled = currentPage === totalPages;

            container.innerHTML = `
                <button onclick="displayPage(${currentPage - 1})" ${prevDisabled ? 'disabled' : ''}
                        class="bg-white text-indigo-600 px-4 py-2 rounded-lg font-semibold shadow-md hover:bg-indigo-50 transition disabled:opacity-50 disabled:cursor-not-allowed">
                    &larr; ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                </button>
                
                <span class="font-semibold text-gray-700">
                    ‡∏´‡∏ô‡πâ‡∏≤ ${currentPage} / ${totalPages}
                </span>

                <button onclick="displayPage(${currentPage + 1})" ${nextDisabled ? 'disabled' : ''}
                        class="bg-white text-indigo-600 px-4 py-2 rounded-lg font-semibold shadow-md hover:bg-indigo-50 transition disabled:opacity-50 disabled:cursor-not-allowed">
                    ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ &rarr;
                </button>
            `;
        }
    </script>

    
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97208427873fa8f7',t:'MTc1NTY3ODQ5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
